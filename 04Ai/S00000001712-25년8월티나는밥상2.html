<script type="text/javascript" src="https://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript" src="https://www.shoppingntmall.com/assets/js/swiper.min.js"></script>
<link rel="stylesheet" href="https://www.shoppingntmall.com/assets/css/swiper.css" class="ska1">
<link rel="stylesheet" href="https://www.shoppingntmall.com/assets/css/common.css" class="ska2">
<link rel="stylesheet" href="https://www.shoppingntmall.com/assets/css/content.css">
<style>
  body {
    min-width: 100%;
    padding: 0;
    margin: 0;
  }
</style>

<link href="https://font.elice.io/css?family=Elice+DX+Neolli" rel="stylesheet">
<div class="video_wrap">
  <p>A.I.</p>
  <!-- 티나는밥상배경영상 --><video class="responsive-video"
    src="https://img.shoppingntmall.com/htmleditor/273/tb1754378573232.mp4"
    poster="https://img.shoppingntmall.com/htmleditor/273/ss1754378572703.jpg" autoplay muted loop playsinline></video>
  <!-- 티나는밥상메인이미지 -->
  <div><img src="https://img.shoppingntmall.com/htmleditor/179/nnn1754453919632.png"></div>
</div>
<!-- 쿠폰영역-->
<!-- <div class="promotion_con"><div class="promotion_con_mo"><img src="https://img.shoppingntmall.com/htmleditor/608/11748331342438.jpg"></div></div>
<div class="coupon_an"></div> -->

<!-- 월별제철음식 -->
<div class="promotion_con">
  <div class="promotion_con_mo"><img src="https://img.shoppingntmall.com/htmleditor/931/881754378814839.png"></div>
</div>
<div class="swiper_pro_wrap2">
  <div class="swiper swiper_pro2">
    <div class="swiper-wrapper">
      <div class="swiper-slide"><img src="https://img.shoppingntmall.com/htmleditor/920/11754280591894.png"></div>
      <div class="swiper-slide"><img src="https://img.shoppingntmall.com/htmleditor/920/21754280592497.png"></div>
    </div>
  </div>
  <div class="swiper_pro_bottom">
    <div class="swiper-button-prev"></div>
    <div class="swiper-button-next"></div>
  </div>
</div>
<script>
  var swiper999 = new Swiper(".swiper_pro2", {
    loop: true,
    autoplay: false,
    slidesPerView: 1,
    spaceBetween: 0,
    pagination: false,
    navigation: {
      nextEl: ".swiper_pro_wrap2 .swiper-button-next",
      prevEl: ".swiper_pro_wrap2 .swiper-button-prev",
    },
  });
</script>
<div class="tn_wrap">
  <!-- 티나는추천텍스트 -->
  <div class="promotion_con">
    <div class="promotion_con_mo"><img src="https://img.shoppingntmall.com/htmleditor/380/ttt1754379034334.png"></div>
  </div>
  <div class="pro_wrap">
    <div class="w50_wrap">
      <a href="" class="pro_video">
        <!-- 티나는추천상품영상 --><video class="responsive-video"
          src="https://img.shoppingntmall.com/htmleditor/247/t_bob1755666406740.mp4" autoplay muted loop
          playsinline></video>
        <!-- NEW뱃지 --><img src="https://img.shoppingntmall.com/htmleditor/743/n1744357361247.gif" class="nbg">
        <div class="tit"></div>
        <div class="sale"></div>
        <div class="price"></div>
      </a>
    </div>
  </div>
  <div class="swiper_pro_wrap">
    <div class="swiper swiper_pro">
      <div class="swiper-wrapper">
        <div class="swiper-slide"><a
            href="https://player.sauceclip.com/player?partnerUniqueId=shoppingntmall&clipId=9179&curationId=206"><img
              src="https://img.shoppingntmall.com/htmleditor/174/11754379413562.png"></a></div>
        <div class="swiper-slide"><a
            href="https://player.sauceclip.com/player?partnerUniqueId=shoppingntmall&clipId=9317&curationId=206"><img
              src="https://img.shoppingntmall.com/htmleditor/174/21754379414017.png"></a></div>
        <div class="swiper-slide"><a
            href="https://player.sauceclip.com/player?partnerUniqueId=shoppingntmall&clipId=8512&curationId=206"><img
              src="https://img.shoppingntmall.com/htmleditor/174/31754379414560.png"></a></div>
        <div class="swiper-slide"><a
            href="https://player.sauceclip.com/player?partnerUniqueId=shoppingntmall&clipId=8364&curationId=206"><img
              src="https://img.shoppingntmall.com/htmleditor/174/41754379415035.png"></a></div>
        <div class="swiper-slide"><a
            href="https://player.sauceclip.com/player?partnerUniqueId=shoppingntmall&clipId=9475&curationId=206"><img
              src="https://img.shoppingntmall.com/htmleditor/174/51754379415428.png"></a></div>
        <div class="swiper-slide"><a
            href="https://player.sauceclip.com/player?partnerUniqueId=shoppingntmall&clipId=8892&curationId=206"><img
              src="https://img.shoppingntmall.com/htmleditor/122/11754978089841.png"></a></div>
        <div class="swiper-slide"><a
            href="https://player.sauceclip.com/player?partnerUniqueId=shoppingntmall&clipId=8888&curationId=206"><img
              src="https://img.shoppingntmall.com/htmleditor/122/21754978090226.png"></a></div>
        <div class="swiper-slide"><a
            href="https://player.sauceclip.com/player?partnerUniqueId=shoppingntmall&clipId=8793&curationId=206"><img
              src="https://img.shoppingntmall.com/htmleditor/122/31754978090630.png"></a></div>
        <div class="swiper-slide"><a
            href="https://player.sauceclip.com/player?partnerUniqueId=shoppingntmall&clipId=8636&curationId=206"><img
              src="https://img.shoppingntmall.com/htmleditor/122/41754978090961.png"></a></div>
        <div class="swiper-slide"><a
            href="https://player.sauceclip.com/player?partnerUniqueId=shoppingntmall&clipId=5591&curationId=205"><img
              src="https://img.shoppingntmall.com/htmleditor/122/51754978091464.png"></a></div>
        <div class="swiper-slide"><a
            href="https://player.sauceclip.com/player?partnerUniqueId=shoppingntmall&clipId=8164&curationId=206"><img
              src="https://img.shoppingntmall.com/htmleditor/122/61754978091794.png"></a></div>



      </div>
    </div>
    <div class="swiper_pro_bottom">
      <div class="swiper-button-prev"></div>
      <div class="swiper-button-next"></div>
    </div>
  </div>
</div>

<div class="tbutton_wrap">
  <div class="tbutton_grid">
    <!-- <a href="/display/showmart/showmartMain" class="first">새벽시장 빠른 장보기</a> -->
    <a href="/display/showmart/showmartMain">새벽배송</a>
    <a href="/category/g-list-cate/90001282">전라남도 식품관</a>
    <a href="/category/g-list-cate/90001304">제주도 식품관</a>
    <!-- <a href="/plan/planshop/swipeDetail/S00000001637" class="qday">농축산 할인</a> -->
  </div>
</div>

<style>
  /* 티나는 추천 배경 */
  .tn_wrap {
    background: linear-gradient(to bottom, #d1eab8, #fff6bf);
  }

  /* 최하단 버튼탭 배경 */
  .tbutton_wrap {
    background: #ecfae1;
  }

  .swiper_pro_wrap2 {
    max-width: 1200px;
    margin: 0 auto;
    overflow: hidden;
    padding: 0%;
    position: relative;
    box-sizing: border-box;
    background-image: url(https://img.shoppingntmall.com/htmleditor/931/bg1754378815606.png)
  }

  .swiper_pro2 {
    position: relative;
    overflow: hidden;
  }

  .swiper_pro2 .swiper-wrapper {
    height: auto;
  }

  .swiper_pro_wrap2 .swiper-button-next,
  .swiper_pro_wrap2 .swiper-button-prev {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 47px;
    height: 46px;
    background: none;
    background-size: cover;
    border: 0;
    display: none;
  }

  .swiper_pro_wrap2 .swiper-slide a {
    background-color: transparent;
  }

  .swiper_pro_wrap2 .swiper-button-next,
  .swiper_pro_wrap2 .swiper-button-prev {
    width: 47px;
    height: 46px;
    background-size: cover;
    z-index: 2;
    top: 45.5%;
    display: block;
  }

  .swiper_pro_wrap2 .swiper-button-next:after,
  .swiper_pro_wrap2 .swiper-button-prev:after {
    display: none;
  }

  .swiper_pro_wrap2 .swiper-button-prev {
    background-image: url("https://img.shoppingntmall.com/htmleditor/920/prev1754280593303.png");
    left: 21.8%;
  }

  .swiper_pro_wrap2 .swiper-button-next {
    background-image: url("https://img.shoppingntmall.com/htmleditor/920/next1754280592849.png");
    right: 21.8%;
  }


  .promotion_con * {
    line-height: initial;
  }

  .promotion_con {
    font-size: 0;
    max-width: 1200px;
    margin: 0 auto;
  }

  .promotion_con .w50 {
    display: inline-block;
    width: 50%;
    vertical-align: middle;
  }

  .promotion_con img {
    width: 100%;
    display: block;
  }

  .promotion_con a,
  .promotion_con button {
    background: none;
    cursor: pointer;
    font-size: 0;
  }

  .promotion_con a,
  .promotion_con img {
    background: none;
  }

  .tn_wrap {
    max-width: 1200px;
    margin: 0 auto;
    overflow: hidden;
  }

  .video_wrap {
    position: relative;
    overflow: hidden;
    max-width: 1200px;
    margin: 0 auto;
    background: #f2faeb;
    padding: 0;
  }

  .video_wrap::after {
    display: block;
    content: '';
    background: linear-gradient(to bottom, rgba(121, 188, 55, 1) 0%, rgba(121, 188, 55, 0) 100%);
    opacity: .26;
    position: absolute;
    z-index: 2;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
  }

  .video_wrap video {
    position: absolute;
    z-index: 1;
    left: 50%;
    transform: translateX(-50%)
  }

  .video_wrap>div {
    position: relative;
    z-index: 3;
    left: 0;
    top: 0;
    width: 100%;
  }

  .video_wrap>div img {
    width: 100%;
  }

  .video_wrap p {
    position: absolute;
    right: 16px;
    top: 16px;
    color: #DFDFDF;
    font-size: 12px;
    border-radius: 4px;
    background: #000;
    z-index: 4;
    padding: 4px 6px;
    font-weight: 700;
    display: block;
    margin: 0;
  }

  .video_wrap .responsive-video {
    width: 720px;
    height: auto;
    max-width: 100%;
    display: block;
    margin: 0 auto;
  }

  .pro_wrap {
    max-width: 674px;
    margin: 0 auto;
    padding: 0 3.4%;
    box-sizing: content-box;
  }

  .pro_wrap .tbg,
  .pro_wrap .nbg {
    position: absolute;
    top: 0;
    z-index: 2;
  }

  .pro_wrap .tbg {
    left: 0;
    border-radius: 6px;
  }

  .pro_wrap .nbg {
    right: 0;
    width: 60px;
    height: auto;
    border-radius: 8px;
  }

  .pro_video {
    position: relative;
    margin: 0 auto;
    box-sizing: border-box;
    overflow: hidden;
    cursor: pointer;
  }

  .pro_video .responsive-video {
    width: 100%;
    border-radius: 8px;
    position: relative;
    z-index: 1;
  }

  .w50_wrap {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    gap: 0 20px;
  }

  .w50_wrap a {
    width: calc(50% - 10px);
    background: transparent;
    position: relative;
  }

  .w50_wrap a:first-child {
    width: 100%;
  }


  .w50_wrap a .thum {
    width: 100%;
    border-radius: 12px;
  }

  .w50_wrap a .tit {
    margin: 18px 0;
    font-size: 30px;
    line-height: 38px;
    word-break: keep-all;
    font-family: 'Elice DX Neolli';
    color: #000;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    font-weight: 300;
  }

  .w50_wrap a .sale {
    font-size: 30px;
    line-height: 34px;
    margin-bottom: 50px;
    color: #ff4e00;
    font-family: 'Elice DX Neolli';
    float: left;
  }

  .w50_wrap a .price {
    font-size: 32px;
    line-height: 32px;
    margin-bottom: 50px;
    color: #000;
    font-family: 'Elice DX Neolli';
    float: left;
  }

  .w50_wrap a .sale+.price {
    margin-left: 10px;
  }

  .coupon_an {
    font-size: 0;
  }

  .coupon_an .re-coupon-wrap,
  .coupon_an .acco-wrap.plan,
  .coupon_an .notice-fold.pt0 {
    background: #f0f0f0;
  }

  .coupon_an .box-gray {
    background: none;
  }

  .swiper_pro_wrap {
    overflow: hidden;
    margin: 0 auto;
    padding: 0%;
    position: relative;
    box-sizing: border-box;
    padding-bottom: 7%;
  }

  .swiper_pro {
    position: relative;
    overflow: hidden;
  }

  .swiper_pro .swiper-wrapper {
    height: auto;
  }

  .swiper_pro_wrap .swiper-button-next,
  .swiper_pro_wrap .swiper-button-prev {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 47px;
    height: 46px;
    background: none;
    background-size: cover;
    border: 0;
    display: none;
  }

  .swiper_pro_wrap .swiper-button-next:after,
  .swiper_pro_wrap .swiper-button-prev:after {
    display: none;
  }

  .swiper_pro_wrap .swiper-slide a {
    background-color: transparent;
  }

  .swiper_pro_wrap .swiper-button-prev {
    background-image: url("https://img.shoppingntmall.com/htmleditor/332/arrp1743122954076.png");
    left: 2%;
  }

  .swiper_pro_wrap .swiper-button-next {
    background-image: url("https://img.shoppingntmall.com/htmleditor/332/arrn1743122953714.png");
    right: 2%;
  }

  .tbutton_wrap {
    max-width: 1200px;
    margin: 0 auto;
    padding: 40px 0;
  }

  .tbutton_grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    ;
    margin: 0 auto;
    max-width: 664px;
    padding: 0 20px;
  }

  .tbutton_grid a {
    position: relative;
    font-family: 'Elice DX Neolli';
    font-size: 32px !important;
    font-weight: 600;
    background-color: #ffffff !important;
    padding: 0 32px;
    color: #3d3d3d;
    border-radius: 12px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 100px;
    line-height: 100px;
    border: 2px solid #a3c18a;
  }

  .tbutton_grid a.first {
    grid-column: span 2;
  }

  .tbutton_grid a::after {
    content: "";
    display: block;
    width: 31px;
    height: 31px;
    background: url(https://img.shoppingntmall.com/htmleditor/085/arrr1754379659886.png);
    position: absolute;
    right: 30px;
  }

  @media screen and (max-width:720px) {
    .promotion_con {
      overflow: hidden;
    }

    .promotion_con_mo {
      margin: 0 -33.33%;
    }

    .video_wrap>div {
      margin: 0 -33.33%;
      width: 166.66%;
    }

    .pro_wrap .tbg {
      width: 20.8vw;
    }

    .pro_wrap .nbg {
      width: 10vw;
      border-radius: 1.2vw;
    }

    .pro_video .responsive-video {
      border-radius: 7px;
    }

    .w50_wrap {
      gap: 0 1vw;
    }

    .w50_wrap a {
      width: calc(50% - 2vw);
    }

    .w50_wrap a .tit {
      margin: 4vw 0;
      font-size: 4vw;
      line-height: 5.5vw;
    }

    .w50_wrap a .sale {
      font-size: 4vw;
      line-height: 4vw;
      margin-bottom: 6vw;
    }

    .w50_wrap a .price {
      font-size: 4.2vw;
      line-height: 3.8vw;
      margin-bottom: 6vw;
    }

    .w50_wrap a .sale+.price {
      margin-left: 0.9vw;
    }

    .swiper_pro_wrap {
      padding-bottom: 12%;
    }

    .swiper_pro_wrap .swiper-button-next,
    .swiper_pro_wrap .swiper-button-prev {
      width: 8.1vw;
      height: 8vw;
      background-size: cover;
      z-index: 2;
      top: 33%;
      display: block;
    }

    .swiper_pro_wrap .swiper-button-prev {
      left: 3.1%;
    }

    .swiper_pro_wrap .swiper-button-next {
      right: 3.1%;
    }

    .swiper_pro_wrap2 .swiper-slide {
      overflow: hidden;
    }

    .swiper_pro_wrap2 .swiper-slide img {
      margin: 0 -33.33%;
      max-width: 166%;
    }

    .swiper_pro_wrap2 .swiper-button-next,
    .swiper_pro_wrap2 .swiper-button-prev {
      width: 8.1vw;
      height: 8vw;
    }

    .swiper_pro_wrap2 .swiper-button-prev {
      left: 2.8%;
    }

    .swiper_pro_wrap2 .swiper-button-next {
      right: 3.6%;
    }

    .tbutton_wrap {
      padding: 5vw 0;
    }

    .tbutton_grid {
      gap: 1.2vw;
      padding: 0 3.5vw;
    }

    .tbutton_grid a {
      font-size: 4.5vw !important;
      padding: 0 4.3vw;
      border-radius: 2vw;
      height: 14vw;
      line-height: 14vw;
    }

    .tbutton_grid a.first {
      grid-column: span 2;
    }

    .tbutton_grid a::after {
      width: 4.3vw;
      height: 4.3vw;
      right: 4vw;
      background-size: cover;
    }
  }
</style>
<script>
  function updateFromStructure() {
    const $wrap = $('.w50_wrap');
    const $proVideo = $wrap.find('.pro_video'); // 보존
    $wrap.empty().append($proVideo); // 초기화 후 pro_video만 다시 삽입

    // 1. PC 구조
    const $pcItems = $('.prd-unit-wrap.typeD ul.prd-unit-list > li');
    if ($pcItems.length > 0) {
      $pcItems.each(function (index) {
        const $li = $(this);
        const imgUrl = $li.find('.prd-img > a > img').attr('src') || '';
        const titleText = $li.find('.prd-info .name').text().trim();
        const priceHtml2 = $li.find('.purchase .sale').text();
        const priceHtml = $li.find('.purchase .price').html();
        const hrefLink = $li.find('.prd-img > a').attr('href') || '#';

        if (index === 0) {
          // ✅ 첫 번째 상품 → pro_video 에 데이터 삽입
          $proVideo.attr('href', hrefLink);
          $proVideo.find('.tit').text(titleText);
          $proVideo.find('.sale').text(priceHtml2);
          $proVideo.find('.price').html(priceHtml);
          return; // 다음으로 넘어가기
        }

        if (index >= 5) return;
        const $a = $('<a>').attr('href', hrefLink);
        $a.append($('<img>').addClass('thum').attr('src', imgUrl));
        $a.append($('<div>').addClass('tit').text(titleText));
        $a.append($('<div>').addClass('sale').text(priceHtml2));
        $a.append($('<div>').addClass('price').html(priceHtml));
        $wrap.append($a);
      });
      return;
    }

    // 2. 모바일 구조 fallback
    const $moItems = $('.sec-tit-area.tit-soat').next('.best-list').find('li');
    if ($moItems.length > 0) {
      $moItems.each(function (index) {
        const $li = $(this);
        const href = $li.find('.link-wrap').attr('href') || '#';
        const imgUrl = $li.find('.thum-area > img').attr('src') || '';
        const titleText = $li.find('.info-txt-area .txt').clone().children('strong').remove().end().text().trim();
        const price2 = $li.find('.price-percent > strong').text();
        const price = $li.find('.price-percent > span').text().trim() + '원';

        if (index === 0) {
          // ✅ pro_video 에 데이터 삽입
          $proVideo.attr('href', href);
          $proVideo.find('.tit').text(titleText);
          $proVideo.find('.sale').text(price2);
          $proVideo.find('.price').text(price);
          return;
        }

        if (index >= 5) return;
        const $a = $('<a>').attr('href', href);
        $a.append($('<img>').addClass('thum').attr('src', imgUrl));
        $a.append($('<div>').addClass('tit').text(titleText));
        $a.append($('<div>').addClass('sale').text(price2));
        $a.append($('<div>').addClass('price').text(price));
        $wrap.append($a);
      });
    }
  }

  $(document).ready(function () {
    $(".sale .hidden").remove();
    updateFromStructure(); // 첫 로드 시

  });
</script>

<script>
  $(function () {
    //뱃지복사
    function getAvailableTbgUrl() {
      let url = $('.sub-tit-area.tit-soat').next('.prd-unit-wrap.typeD')
        .find('.prd-img .badge-pro > img').first().attr('src');
      if (!url) {
        url = $('.sec-tit-area.is-ellipsis.tit-soat').next('.best-list')
          .find('li .badge-pro > img').first().attr('src');
      }
      return url || '';
    }
    function applyBadges() {
      const tbgUrl = getAvailableTbgUrl();
      $('.pro_video').each(function () {
        const $videoWrap = $(this);
        const $nbg = $videoWrap.find('.nbg').clone();
        const $tbg = $('<img>').attr('src', tbgUrl).addClass('tbg');
        $videoWrap.prepend($nbg.clone());
        $videoWrap.prepend($tbg.clone());
        $videoWrap.siblings('a').each(function () {
          $(this).prepend($nbg.clone());
          $(this).prepend($tbg.clone());
        });
      });
    }
    applyBadges();

    //쿠폰다운 이동
    $('.re-coupon-wrap, .acco-wrap.plan, .notice-fold.pt0').appendTo(".coupon_an");

  });
  //스와이퍼
  var swiperInstance;
  function isMobile() {
    return window.innerWidth <= 768;
  }

  function initSwiper() {
    // 기존 인스턴스가 있으면 제거
    if (swiperInstance && typeof swiperInstance.destroy === 'function') {
      swiperInstance.destroy(true, true);
    }

    var swiperOptions = {
      loop: true,
      autoplay: {
        delay: 3000,
        disableOnInteraction: true
      },
      pagination: false,
      observer: true,
      observeParents: true
    };

    if (isMobile()) {
      Object.assign(swiperOptions, {
        spaceBetween: 14,
        slidesPerView: 2.5,
        slidesOffsetBefore: 12,
        slidesOffsetAfter: 12,
        navigation: {
          nextEl: ".swiper_pro_wrap .swiper-button-next",
          prevEl: ".swiper_pro_wrap .swiper-button-prev",
        },
        centeredSlides: false
      });
    } else {
      Object.assign(swiperOptions, {
        spaceBetween: 27,
        slidesPerView: 4,
        centeredSlides: true
      });
    }

    swiperInstance = new Swiper(".swiper_pro", swiperOptions);
  }

  // 초기 실행
  window.addEventListener("load", initSwiper);

  // 리사이즈 대응 (디바운스 처리도 가능하지만 기본형으로 제공)
  let resizeTimer;
  window.addEventListener("resize", function () {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(() => {
      initSwiper();
    }, 300); // 300ms 디바운스
  });

  //예약 
  const nowD = new Date();
  const formatDate = (value) => String(value).padStart(2, '0');
  const formatDateTime = (date) => `${date.getFullYear()}-${formatDate(date.getMonth() + 1)}-${formatDate(date.getDate())} ${formatDate(date.getHours())}:${formatDate(date.getMinutes())}:${formatDate(date.getSeconds())}`;
  const nowT = formatDateTime(nowD);
  const hideQ = () => document.querySelectorAll('.qday').forEach(e => e.style.display = 'none');
  //if ('2025-08-11 00:00:00' <= nowT) { hideQ();}
  //if ('2025-08-14 00:00:00' <= nowT) { document.querySelectorAll('.qday').forEach(e => e.style.display = 'flex');}
</script>